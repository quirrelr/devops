# Данный файл является решением к [заданию 5](README_RUS-5.md)

## Part 1. Проба пера
#### Содержание main.sh
![](/source/d3-p1-1.png)

Разберем ключевые строчки данного скрипта: 
1. `if [ -z "$1" ] ; then` \
Условие можно расшифровать следующим образом: "Если первый аргумент пустой...". Создание условий в bash имеет свои тонкости - условие должно быть заключено в квадратные скобки и при этом скобки должны обособляться пробелами. Фактически, квадратные скобки являются синонимом команды test, у которой есть определенные ключи, как например в данной строке. `test -z "$1"` вернет 1 если аргумент пустой и 0 не пустой. Таких ключей много и расписывать каждый из них я не вижу смысла. \
Так же после `if ...` следует ставить `;` т.к. для интерпретатора Bash `if` и `then` это две разные команды.
2.  `elif [[ "$1" =~ ^[0-9]+$ ]]` \
Здесь уже строка интереснее. В данном elif (а это else if) используются две пары квадратных скобок. `[[ ]]` это встроенная конструкция Bash, которая понимает более сложные условия. А по оператору `=~` мы можем понять, что здесь используются регулярные выражения. И данное условие вернет 1, если строка слева совпадает с шаблоном справа. Теперь разберем само регулярное выражение.

    `^[0-9]+$`
- `^` - начало строки. Означает, что строка должна начинаться с `[0-9]`
- `[0-9]` - одна цифра. Дан диапазон цифр.
- `+` - повторяется один и более раз
- `$` - конец строки

    В итоге мы получаем следующий шаблон: \
    **Выражение должно начаться, содержать 1 и более цифру подряд и тут же закончиться.** \
    Я прикинул все кейсы чтобы понять, как отсеиваются не числа. И задумался на одном примере `123a123`. Казалось бы, цифрой начинается, цифрой заканчивается и еще больше одной цифры. Но это работает не совсем так. На символе `a` сломается, т.к. серия `[0-9]+` прерывается и соответственно на этой серии не закончится строка - строка уходит как неподходящая.

## Part 2. Исследование системы
#### Содержание main.sh
![](/source/d3-p2-1.png)
#### Содержание var.sh
![](/source/d3-p2-2.png)

Здесь я сел на очень долго. Думал сделать как надо, по красоте и засиделся... Вообще мне очень понравилось задание - я использовал много новых инструментов и, что самое главное, оптимизировал и автоматизировал.

Начнем с файла var.sh. Я думаю, ты и сам все можешь увидеть. Здесь не было чего-то трудного, но я тратил много времени знакомясь и оттачивая применение команд. К концу файла я к ним привык настолько, что спокойно мог бы написать его заново полностью самостоятельно. Это было очень приятно и несколько расслабляюще.

Теперь о main.sh. Просто расскажу о тупике, в который попал, и как из него вышел:
    После вывода нужно еще раз записать все в файл. Но! У нас есть запрос ответа от пользователя. Поэтому просто перенаправить вывод нельзя. В целом, сейчас я понимаю, что можно было добавить одну переменную как некий индикатор и условие на запрос.
    Решил это следующим способом:
    Создаю файл с рандомизированным названием (дабы исключить совпадение названий) и туда дублирую все echo. И уже либо сохраняю файл, либо нет.

## Part 3. Визуальное оформление вывода для скрипта исследования системы
#### main.sh
![](/source/d3-p3-1.png) \
![](/source/d3-p3-2.png)
#### case.sh
![](/source/d3-p3-3.png)

var остался тем же
